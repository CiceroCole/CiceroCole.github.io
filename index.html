<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 1 页 | Cicero Cole</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="我记笔记的地方">
<meta property="og:type" content="website">
<meta property="og:title" content="Cicero Cole">
<meta property="og:url" content="https://cicerocole.cc/index.html">
<meta property="og:site_name" content="Cicero Cole">
<meta property="og:description" content="我记笔记的地方">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Cicero Cole">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Cicero Cole" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 7.3.0"></head>



  <body>


  
  
  <div class="site-header-image">
    <img id="originBg" width="100%" alt="Hike News" src="">
  </div>

  <div id="header-blur" class="site-header-image blur" style="position: absolute; top:0; height: 207px; min-height: 207px; min-width: 100%;">
    <img id="blurBg" width="100%" style="top: 96%" alt="Hike News" src="">
  </div>

  <script>
        var imgUrls = "".split(",");
        var random = Math.floor((Math.random() * imgUrls.length ));
        if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
          document.getElementById("originBg").src=imgUrls[random];
          document.getElementById("blurBg").src=imgUrls[random];
        } else {
          document.getElementById("originBg").src='/' + imgUrls[random];
          document.getElementById("blurBg").src='/' + imgUrls[random];
        }
    </script>




<header id="allheader" class="site-header" role="banner" 
   style="width: 100%; position: absolute; top:0; background: rgba(255,255,255,.8);"  >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Cicero Cole" rel="home"> Cicero Cole </a>
            
          </h1>
          
          
            <div class="site-description">我记笔记的地方</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"> <a class="" href="/">首页</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/archives/"> <a class="" href="/archives/">归档</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"> <a class="" href="/tags">标签</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/about/"> <a class="" href="/about/">关于</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-瞎捣鼓-把C盘转移的只剩Windows"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/05/03/%E7%9E%8E%E6%8D%A3%E9%BC%93-%E6%8A%8AC%E7%9B%98%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%8F%AA%E5%89%A9Windows/">[瞎捣鼓] 把C盘转移的只剩Windows</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/05/03/%E7%9E%8E%E6%8D%A3%E9%BC%93-%E6%8A%8AC%E7%9B%98%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%8F%AA%E5%89%A9Windows/" class="article-date">
	  <time datetime="2025-05-03T13:30:04.000Z" itemprop="datePublished">五月 3, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>想要把C盘保留的只剩Windows文件夹，那么就要把别的文件夹移出去，那怎么移出去呢？</p>
<blockquote>
<p><strong>危险命令警告 : 本文章中部分操作可能会造成严重后果，请备份好您的数据。</strong></p>
</blockquote>
<h2 id="一、分析步骤"><a href="#一、分析步骤" class="headerlink" title="一、分析步骤"></a>一、分析步骤</h2><p>主要是以下步骤：</p>
<ol>
<li>复制C盘下文件夹至其他盘</li>
<li>删除C盘的文件夹</li>
<li>创建C盘 文件夹&lt;&#x3D;&gt; 的其他盘文件夹 的硬链接</li>
</ol>
<p>而删除C盘文件的时候会存在已经运行的系统程序，所以要在PE系统或者Windows的系统恢复模式下的CMD执行操作。<br>而为了方便实现这些操作，就要使用以下这四个命令实现每个步骤。</p>
<h2 id="二、解释命令"><a href="#二、解释命令" class="headerlink" title="二、解释命令"></a>二、解释命令</h2><ol>
<li>shutdown 关机重启至Windows恢复模式<br>我们使用时的命令为：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown /r /o /t 0</span><br></pre></td></tr></table></figure>
参数解析:<br><code>/r</code> : 重启计算机。<br><code>/o</code> : 转到高级启动选项菜单(恢复模式)并重新启动计算机。<br><code>/t 0</code> : 将关闭前的超时时间设置为0秒。</li>
<li>robocopy 复制C盘文件夹至其他盘<br>我们使用时的命令为：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">robocopy <span class="string">&quot;sourcePath&quot;</span> <span class="string">&quot;targetPath&quot;</span> /E /COPYALL /XJ /XD WindowsApps</span><br></pre></td></tr></table></figure>
参数解析:<br><code>&quot;sourcePath&quot;</code> : 源目录<br><code>&quot;targetPath&quot;</code> : 目录路径<br><code>/E</code> : 复制所有子目录（包括空目录）。<br><code>COPYALL</code> : 复制所有文件信息<br><code>/XJ</code> : 排除符号链接的项目（避免因符号链接导致递归复制或错误）<br><code>/XD WindowsApps</code> : 排除名为 WindowsApps 的目录（常用于跳过系统或应用商店的敏感目录）。</li>
<li>rmdir 删除C盘文件夹<br>我们使用时的命令为：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> <span class="string">&quot;targetPath&quot;</span> /S /Q</span><br></pre></td></tr></table></figure>
参数解析:<br><code>rmdir</code> : 删除目录的命令。<br><code>&quot;targetPath&quot;</code> : 目标目录（Windows 默认程序安装路径）。<br><code>/S</code> : 递归删除目录及其所有子目录和文件。<br><code>/Q</code> : 静默模式（不提示确认）。</li>
<li>mklink 创建硬链接<br>我们使用时的命令为：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /J  <span class="string">&quot;targetPath&quot;</span> <span class="string">&quot;sourcePath&quot;</span></span><br></pre></td></tr></table></figure>
参数解析:<br><code>/J</code> : 创建目录联接（Junction）（适用于本地目录）<br><code>&quot;targetPath&quot;</code> : 新创建的链接路径（目标路径）<br><code>&quot;sourcePath&quot;</code> : 原始目录路径（源路径）</li>
</ol>
<p>熟悉命令后，我们只要在Windows恢复模式的CMD或者PE系统运行就好了。但是鉴于Windows恢复模式下的CMD使用不便，而且我们的操作都是对C盘重要文件夹操作，所以还是提前编写脚本，之后再到运行就会方便而且安全很多。那具体脚本如何写呢？</p>
<h2 id="三、具体脚本"><a href="#三、具体脚本" class="headerlink" title="三、具体脚本"></a>三、具体脚本</h2><p>由于重启命令只有一行而且没有风险，所以不必编写脚本，<br>那我们只要编写操作较多的复制、删除与链接脚本就好。<br>这里，我们把软件要转移的盘设置为D盘，数据要转移的盘设置为E盘，若要转换别的盘针对性修改参数即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SET ProgPath=D:</span><br><span class="line">SET DataPath=E:</span><br><span class="line"><span class="built_in">echo</span> ---------Moveing <span class="string">&quot;Program Files (x86)&quot;</span>---------</span><br><span class="line">robocopy <span class="string">&quot;C:\Program Files (x86)&quot;</span> <span class="string">&quot;%ProgPath%\Program Files (x86)&quot;</span> /E /COPYALL /XJ /XD WindowsApps</span><br><span class="line"><span class="built_in">rmdir</span> <span class="string">&quot;C:\Program Files (x86)&quot;</span> /S /Q</span><br><span class="line">mklink /J <span class="string">&quot;C:\Program Files (x86)&quot;</span> <span class="string">&quot;%ProgPath%\Program Files (x86)&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -------------Moveing <span class="string">&quot;Program Files&quot;</span>-----------</span><br><span class="line">robocopy <span class="string">&quot;C:\Program Files&quot;</span> <span class="string">&quot;%ProgPath%\Program Files&quot;</span>  /E /COPYALL /XJ /XD WindowsApps</span><br><span class="line"><span class="built_in">rmdir</span> <span class="string">&quot;C:\Program Files&quot;</span> /S /Q</span><br><span class="line">mklink /J <span class="string">&quot;C:\Program Files&quot;</span> <span class="string">&quot;%ProgPath%\Program Files&quot;</span></span><br><span class="line"><span class="built_in">echo</span> ----------------Moveing <span class="string">&quot;Users目录&quot;</span>----------------</span><br><span class="line">robocopy <span class="string">&quot;C:\\Users&quot;</span> <span class="string">&quot;%DataPath%\Users&quot;</span> /E /COPYALL /XJ /XD WindowsApps</span><br><span class="line"><span class="built_in">rmdir</span> <span class="string">&quot;C:\\Users&quot;</span> /S /Q</span><br><span class="line">mklink /J <span class="string">&quot;C:\\Users&quot;</span> <span class="string">&quot;%DataPath%\Users&quot;</span></span><br></pre></td></tr></table></figure>
<p>将以上脚本修改保存以<code>.bat</code>为文件后缀名，比如<code>mv.bat</code>,存放到你能找到的地方。</p>
<h2 id="四、运行脚本"><a href="#四、运行脚本" class="headerlink" title="四、运行脚本"></a>四、运行脚本</h2><p>接下来，运行以下命令便会进入到Windows的恢复模式:</p>
<blockquote>
<p><strong>先不要运行，先看完以下步骤再运行命令</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown /r /o /t 0</span><br></pre></td></tr></table></figure>
<p>之后在打开的蓝色界面中，按照以下步骤以此点击即可进入Windows的恢复模式中的CMD:</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">故障排除 -&gt; 高级选项 -&gt; 命令提示符</span><br></pre></td></tr></table></figure>
<p>之后，在命令行中输入保存的<code>.bat</code>后缀的脚本文件路径,回车运行等待运行完成即可。<br>若Windows的恢复模式中没有以上选项，可以去使用PE系统操作，网络上具体方法较多，自己查询即可。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="tag">文件管理</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%9E%8E%E6%8D%A3%E9%BC%93/" rel="tag">瞎捣鼓</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Java-Java打包jar文件"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/04/23/Java-Java%E6%89%93%E5%8C%85jar%E6%96%87%E4%BB%B6/">[Java] Java打包jar文件</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/04/23/Java-Java%E6%89%93%E5%8C%85jar%E6%96%87%E4%BB%B6/" class="article-date">
	  <time datetime="2025-04-23T15:17:36.000Z" itemprop="datePublished">四月 23, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Java打包jar文件"><a href="#Java打包jar文件" class="headerlink" title="Java打包jar文件"></a>Java打包jar文件</h1><h3 id="1-编译-java文件"><a href="#1-编译-java文件" class="headerlink" title="1.编译.java文件"></a>1.编译.java文件</h3><p>通过<code>javac</code>命令编译<code>.java</code>后缀的源码文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">javac -d 生成目录 源码目录路径或源码文件路径</span><br><span class="line"><span class="comment"># 例如: </span></span><br><span class="line">javac -d ./Build project/test/app/</span><br><span class="line">javac -d ./Build project/test/*.java</span><br></pre></td></tr></table></figure>
<h3 id="2-打包-class文件"><a href="#2-打包-class文件" class="headerlink" title="2.打包.class文件"></a>2.打包.class文件</h3><p>打包时一般使用<code>cfvm</code>或者<code>cfve</code>参数，</p>
<ul>
<li><code>cfvm</code>参数使用<code>.MF</code>文件来指定打包清单，和决定主类（入口）</li>
<li><code>cfve</code>参数是在输入打包命令的参数指定主类</li>
</ul>
<ol>
<li>使用<code>cfvm</code>参数打包,<br>配置<code>.MF</code>文件，名字可以自定义，我这里使用<code>CONFIG.MF</code>这个文件名<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Manifest-Version: 1.0</span><br><span class="line">Created-By: 23.0.1 (Oracle Corporation)</span><br><span class="line">Main-Class: project.test.app.Main</span><br><span class="line"># 此处应为空行</span><br></pre></td></tr></table></figure>
其中，<code>Main-Class</code>配置项，填写编译后的主类路径(注意不要加.class)<br>注意:<ul>
<li><strong>主类路径是对于打包时选定的路径开始的(包含选取的目录)</strong></li>
<li><strong>冒号后面加一个空格</strong></li>
<li><strong>最后行必须为空行</strong></li>
</ul>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Build</span><br><span class="line">jar -cfvm Out.jar CONFIG.MF ./project</span><br></pre></td></tr></table></figure>
<ul>
<li><code>Out.jar</code> 为打包后的打包文件名</li>
<li><code>CONFIG.MF</code>为刚刚配置的<code>.MF</code>文件</li>
<li><code>./project</code> 为刚刚<code>javac</code>编译完成的目录</li>
</ul>
<p>命令运行结束后，目录下会出现<code>Out.jar</code>文件</p>
<ol start="2">
<li>使用<code>cfve</code>参数打包<br>打包命令如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Build</span><br><span class="line">jar -cfve Out.jar project.test.app.Main ./project</span><br></pre></td></tr></table></figure>
<ul>
<li><code>Out.jar</code> 为打包后的打包文件名</li>
<li><code>project.test.app.Main</code>为填写编译后的主类路径(注意不要加.class)</li>
<li><code>./project</code> 为刚刚<code>javac</code>编译完成的目录</li>
</ul>
</li>
</ol>
<p>命令运行结束后，目录下会出现<code>Out.jar</code>文件</p>
<h3 id="3-运行与导入jar"><a href="#3-运行与导入jar" class="headerlink" title="3.运行与导入jar"></a>3.运行与导入jar</h3><ol>
<li><p>运行jar<br>在刚刚打包完成的<code>.jar</code>文件目录打开cmd,输入如下命令即可运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar Out.jar</span><br></pre></td></tr></table></figure>
<p>其中，<code>Out.jar</code>就是我们刚刚生成的<code>.jar</code>文件的文件名</p>
</li>
<li><p>导入jar<br>jar文件还可以在其他java程序编译或运行时导入<br>秩序将java程序需要的包进行打包，并在运行时添加如下参数即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编译时导入示例</span></span><br><span class="line">javac -<span class="built_in">cp</span> <span class="string">&quot;path/to/classes;path/to/lib.jar&quot;</span> MyClass.java</span><br><span class="line"><span class="comment"># 运行时导入示例</span></span><br><span class="line">java -<span class="built_in">cp</span> <span class="string">&quot;path/to/classes;path/to/lib.jar&quot;</span> my.package.MainClass</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><code>path/to/classes;</code>是我们需要导入的<code>.class</code>文件的路径(可忽略)</li>
<li><code>path/to/lib.jar</code>是我们需要导入的<code>.jar</code>文件的路径</li>
<li><code>MyClass.java</code>是我们编译时的java源码文件</li>
<li><code>my.package.MainClass</code>是我们运行时的java源码文件路径</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Python-embed版Python打包使用"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/04/23/Python-embed%E7%89%88Python%E6%89%93%E5%8C%85%E4%BD%BF%E7%94%A8/">[Python] embed版Python打包使用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/04/23/Python-embed%E7%89%88Python%E6%89%93%E5%8C%85%E4%BD%BF%E7%94%A8/" class="article-date">
	  <time datetime="2025-04-23T11:29:31.000Z" itemprop="datePublished">四月 23, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="embed版Python打包使用"><a href="#embed版Python打包使用" class="headerlink" title="embed版Python打包使用"></a>embed版Python打包使用</h1><blockquote>
<p>参考引用<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/peanutwang/article/details/135678781">embed版Python如何安装第三方包</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/557884165">【Python打包】Python embed打包方法 亲测有效</a><br><a target="_blank" rel="noopener" href="https://github.com/Likianta/pyportable-installer/blob/master/docs/add-tkinter-to-embed-python.md">如何将 Tk 套件加入到嵌入式 Python 中</a></p>
</blockquote>
<p>记录一下embed版Python打包使用<br>embed版Python就是精简纯净的Python，非常适合打包发布。</p>
<h3 id="1-下载embed版Python"><a href="#1-下载embed版Python" class="headerlink" title="1.下载embed版Python"></a>1.下载embed版Python</h3><ul>
<li>通过华为源下载</li>
<li>打开<a target="_blank" rel="noopener" href="https://mirrors.huaweicloud.com/python/">https://mirrors.huaweicloud.com/python/</a></li>
<li>选取想要版本的Python，找到XXXXXX-embed-win32.zip后缀的文件下载</li>
<li>将下载的文件解压就好</li>
</ul>
<h3 id="2-配置-pth文件与安装pip"><a href="#2-配置-pth文件与安装pip" class="headerlink" title="2.配置._pth文件与安装pip"></a>2.配置._pth文件与安装pip</h3><ol>
<li><p>在解压好的文件目录中，编辑<code>._pth</code>后缀的文件</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python310.zip</span><br><span class="line">#  这里添加想要导入的模块路径，是相对于解释器的路径</span><br><span class="line"></span><br><span class="line"># Uncomment to run site.main() automatically</span><br><span class="line">#import site # 取消注释以启用第三方库。</span><br></pre></td></tr></table></figure>
</li>
<li><p>将其中 <code>#import site</code>前的<code>#</code>删除，以取消注释，使第三方库生效</p>
</li>
<li><p>下载 <a target="_blank" rel="noopener" href="https://bootstrap.pypa.io/get-pip.py">get-pip.py</a>(点击下载)文件，复制到之前python的解压的目录中（python解释器程序同级目录）。</p>
</li>
<li><p>解压的目录下打开cmd，输入以下命令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\python get-pip.py</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-安装第三方库"><a href="#3-安装第三方库" class="headerlink" title="3.安装第三方库"></a>3.安装第三方库</h3><p>在python的目录下打开cmd，输入以下命令安装第三方库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\python -m pip install 第三方库名</span><br></pre></td></tr></table></figure>
<p>可增加以下参数使用清华镜像源下载:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\python -m pip install -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple 第三方库名</span><br></pre></td></tr></table></figure>
<h3 id="4-打包发布"><a href="#4-打包发布" class="headerlink" title="4.打包发布"></a>4.打包发布</h3><p>之后直接将源代码及其python目录压缩发布即可</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-数据结构 线段树笔记"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/03/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%20%E7%BA%BF%E6%AE%B5%E6%A0%91%E7%AC%94%E8%AE%B0/">[数据结构] 线段树笔记</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/03/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%20%E7%BA%BF%E6%AE%B5%E6%A0%91%E7%AC%94%E8%AE%B0/" class="article-date">
	  <time datetime="2025-03-25T13:43:49.000Z" itemprop="datePublished">三月 25, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="线段树"><a href="#线段树" class="headerlink" title="线段树"></a>线段树</h2><h3 id="简述何为线段树"><a href="#简述何为线段树" class="headerlink" title="简述何为线段树"></a>简述何为线段树</h3><blockquote>
<p>参考文章<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weq2011/article/details/128791426">【学习笔记】详解线段树(浅显易懂,匠心之作,图文并茂)</a></p>
</blockquote>
<p>简单来说，是通过原数组生成一个的一个二叉树，其中，树的每一个非叶子节点都是由其子节点通过一些算数运算生成的，比如求解区间和，就是每个节点对子节点求和生成的，每个节点存储的就是子节点的和，</p>
<p><em><code>(node.value = node.left.value + node.right.value)</code></em></p>
<p>或者区间最大值的树,就是取其中最大值生成的，每个节点就是子节点中的最大值</p>
<p><em><code>(node.value = max(node.left.value, node.right.value))</code></em></p>
<p>线段树从叶子依次向上生成的。那么来说，每个非叶子节点的值<br>就是代表所有子节点的的有效值（或者说是特征（最大最小））的节点，每个节点代表的区间就是对应着所有子节点区间的合并区间。<br>例如叶子节点为原数组的值，那么其父节点的值就是其与兄弟节点的和（或者取最大最小值），<br>其父节点的所代表的区间就是其节点的区间与兄弟节点的区间的合并区间。<br>(因为每个叶子节点代表的区间就是他自己本身，所以其节点的区间与兄弟节点的区间的合并区间就是它们本身)</p>
<p>其逻辑结构形如下图 (区间和的线段树): </p>
<p><img src="/image/2025/0325/%E7%BA%BF%E6%AE%B5%E6%A0%91.jpg" alt="区间和的线段树"></p>
<p>但是线段树以顺序表存储会处理更加方便，所以采用顺序结构存储，其存储结构形如下图，</p>
<table>
    <tr>
    <td>root</td>
    <td>node 1</td>
    <td>node 2</td>
    <td>...</td>
    <td>原数组元素 0</td>
    <td>原数组元素 1</td>
    <td>...</td>
    <td>原数组元素 n</td>
   </tr>
</table>
如果原数组元素的大小为n，那么原数组的元素从n处复制存储


<p>其中每一个节点都有四个属性:</p>
<ul>
<li>start : 节点所代表区间的开始地址</li>
<li>end   : 节点所代表区间的结束地址</li>
<li>value : 节点所代表区间的总有效值</li>
<li>lazy  : 节点所代表区间的修改值</li>
</ul>
<p>其中根节点为坐标为0，每一个地址为i的节点的左右孩子地址分别为<code>i*2</code>与<code>i*2+1</code>，父节点为<code>i/2</code>，<br>其中线段树的主要作用是数组区间频繁查询或修改</p>
<h3 id="区间频繁查询："><a href="#区间频繁查询：" class="headerlink" title="区间频繁查询："></a>区间频繁查询：</h3><p>查询涉及分治思想，分解，解决，合并。<br>若要查找的区间<code>[l,r]</code>与当前节点所包含的区间<code>[start,end]</code>完全相同<br>(即node.start&#x3D;l 且node.end&#x3D;r)<br>那么直接返回当前节点的值，因为当前节点就代表其包含区间的总有效值<br>若是从树顶至下查找区间<code>[l,r]</code>并不是与当前节点完全相同，那么无非三种情况，</p>
<ol>
<li>要查找区间完全在当前节点完全在当前节点的左节点的区间<ul>
<li>那么直接递归进入左子树继续查询</li>
</ul>
</li>
<li>要查找区间完全在当前节点完全在当前节点的右节点的区间<ul>
<li>那么直接递归进入右子树继续查询</li>
</ul>
</li>
<li>要查找区间完全在一部分在左节点的区间，一部在右节点的区间<ul>
<li>将要查找的区间<code>[l,r]</code> 分为两部分<code>[l, m]</code>与<code>[m,r]</code> 其中<code>m = (l+r)/2</code>，</li>
<li>再对左子树查询<code>[l,m]</code>,右子树查找<code>[m,r]</code></li>
</ul>
</li>
</ol>
<p>以上情况会一直递归至要查找的区间<code>[l,r]</code>与当前节点所包含的区间<code>[start,end]</code>完全相同<br>那么就会递归返回其节点的值，其值即为最终的值。</p>
<h3 id="区间频繁修改"><a href="#区间频繁修改" class="headerlink" title="区间频繁修改"></a>区间频繁修改</h3><p>区间频繁修改需要给每个节点添加一个新的属性lazy,<br>每个节点的lazy属性标志着其区间的修改标志，<br>例如，在一棵对于求区间和的线段树中，如果修改代表区间<code>[l,r]</code>区间的节点node的lazy为10<br>就代表在<code>[l,r]</code>这个区间中，每个值都添加10,但是不需要修改其所有子节点的值，只需要知道<br>当前节点的所有子节点个数n，再返回<code>node.value + 10 * n</code>即可。<br>设置区间的lazy的过程与查询区间相同，从线段树的根节点开始依次向下查找，<br>查找到符合区间的节点之后，设置其lazy属性即可。</p>
<h3 id="单点查询与修改"><a href="#单点查询与修改" class="headerlink" title="单点查询与修改"></a>单点查询与修改</h3><h4 id="单点查询"><a href="#单点查询" class="headerlink" title="单点查询"></a>单点查询</h4><p>如果想要在树中查询某个元素(叶子节点)的值，那么从根节点开始向下查找<br>在递归的过程中，若在当前当前节点的区间已经被修改，即lazy不为0,<br>那么在递归查找子节点时，就需要把当前节点的lazy设置给子节点，并将当前节点的lazy置零<br>这个操作叫做下放<code>pushdown</code><br>直至查找到要查询的节点元素时，通过lazy值来对当前节点的值修改<br>并把lazy置零，返回当前节点修改后的值</p>
<h4 id="单点修改"><a href="#单点修改" class="headerlink" title="单点修改"></a>单点修改</h4><p>单点修改在单点查询的基础上，找到要修改的节点元素，再对节点进行修改<br>之后，从当前节点向父节点递归修改父节点的值，直至根节点<br>因为对单个叶子节点进行修改，可能会改变包含本节点区间的节点的值<br>（也可能不会，比如在区间最大值的线段树中，修改后的节点值仍然比兄弟节点小），<br>所以需要对父节点进行递归修改。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-数据结构-差分数组-前缀和"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/03/23/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84-%E5%89%8D%E7%BC%80%E5%92%8C/">[数据结构] 差分数组+前缀和</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/03/23/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84-%E5%89%8D%E7%BC%80%E5%92%8C/" class="article-date">
	  <time datetime="2025-03-23T15:10:27.000Z" itemprop="datePublished">三月 23, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="差分数组-前缀和"><a href="#差分数组-前缀和" class="headerlink" title="差分数组+前缀和"></a>差分数组+前缀和</h2><blockquote>
<p>参考文章</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_74408723/article/details/143067738">差分数组+前缀和——小而美的算法</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44786250/article/details/100056975">差分数组是个啥？能干啥？怎么用？</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_31601743/article/details/105352885">什么是差分数组？</a></li>
</ul>
</blockquote>
<p>差分数组的推导公式:<br>原数组为num,差分数组为diff,前缀和数组为sum,</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diff[<span class="number">0</span>] = num[<span class="number">0</span>]</span><br><span class="line">diff[i] = num[i] - num[i<span class="number">-1</span>] </span><br></pre></td></tr></table></figure>
<p>前缀和的推导公式: </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sum[<span class="number">0</span>] = num[<span class="number">0</span>]</span><br><span class="line">sum[i] = num[i] + sum[i<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>差分数组主要用来大范围的区间修改</strong></li>
<li><strong>前缀和主要用来大范围的区间查询</strong></li>
</ul>
<p>举个例子，假设原数组为num，差分数组为diff，前缀和数组为sum</p>
<ul>
<li>建立差分数组</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>num</td>
<td>1</td>
<td>3</td>
<td>5</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>diff(num)</td>
<td>1</td>
<td>3-1</td>
<td>5-3</td>
<td>2-5</td>
<td>8-2</td>
</tr>
<tr>
<td>diff</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>-3</td>
<td>6</td>
</tr>
</tbody></table>
<ul>
<li>建立前缀和数组</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>5</th>
</tr>
</thead>
<tbody><tr>
<td>num</td>
<td>1</td>
<td>4</td>
<td>8</td>
<td>6</td>
<td>14</td>
</tr>
<tr>
<td>sum(num)</td>
<td>1</td>
<td>+4</td>
<td>+8</td>
<td>+6</td>
<td>+14</td>
</tr>
<tr>
<td>sum</td>
<td>1</td>
<td>5</td>
<td>13</td>
<td>19</td>
<td>33</td>
</tr>
</tbody></table>
<h3 id="差分数组"><a href="#差分数组" class="headerlink" title="差分数组:"></a>差分数组:</h3><p>当需要对原数组元素区间频繁修改值时，<br>只需要对差分数组的做简单修改就可以，<br>例如要修改原数组范围[1,3]的元素全部+2，<br>只需要修改差分数组的diff[1] +&#x3D; 2和diff[3+1] -&#x3D; 2<br>即：</p>
<ul>
<li><strong>当要修改区间[l,r]的元素全部+k时，只需要修改<code>diff[l] += k</code>和<code>diff[r+1] -= k</code>即可。</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diff[l] += k</span><br><span class="line">diff[r+<span class="number">1</span>] -= k</span><br></pre></td></tr></table></figure>
<h3 id="前缀和数组"><a href="#前缀和数组" class="headerlink" title="前缀和数组:"></a>前缀和数组:</h3><p>当需要对原数组元素区间元素的和频繁查询时，<br>只需要建立前缀和数组就可大大提升查询速度，<br>例如要查询原数组范围[1,3]的元素和，<br>原数组 num &#x3D; {1, 3,  5,  2,  8 }<br>前缀和数组 sum &#x3D; {1,  4,  8,  6,  14 }<br>那么查询[1,3]的元素和，只需要查询sum[3] - sum[1-1]即可。<br>即:</p>
<ul>
<li><strong>当要查询区间[l,r]的元素和时，只需要查询<code>sum[r] - sum[l-1]</code>即可。</strong></li>
</ul>
<h3 id="取回原数组"><a href="#取回原数组" class="headerlink" title="取回原数组"></a>取回原数组</h3><ul>
<li><strong>若要取回原数组，只需要对差分数组进行建立前缀和数组即是原数组。</strong></li>
<li><strong>同样的，只需要对前缀和数组进行建立差分数组也是原数组。</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">num = sum(diff)</span><br><span class="line">num = diff(sum)</span><br></pre></td></tr></table></figure>

<p>例子: 对差分数组进行建立前缀和数组即是原数组</p>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>num</td>
<td>1</td>
<td>3</td>
<td>5</td>
<td>2</td>
<td>8</td>
</tr>
<tr>
<td>diff(num)</td>
<td>1</td>
<td>3-1</td>
<td>5-3</td>
<td>2-5</td>
<td>8-2</td>
</tr>
<tr>
<td>diff</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>-3</td>
<td>6</td>
</tr>
<tr>
<td>sum(diff)</td>
<td>1</td>
<td>+2</td>
<td>+2</td>
<td>-3</td>
<td>+6</td>
</tr>
<tr>
<td>num</td>
<td>1</td>
<td>3</td>
<td>5</td>
<td>2</td>
<td>8</td>
</tr>
</tbody></table>
<p>例子: 对前缀和数组进行建立差分数组是原数组</p>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>num</td>
<td>1</td>
<td>4</td>
<td>8</td>
<td>6</td>
<td>14</td>
</tr>
<tr>
<td>sum(num)</td>
<td>1</td>
<td>+4</td>
<td>+8</td>
<td>+6</td>
<td>+14</td>
</tr>
<tr>
<td>sum</td>
<td>1</td>
<td>5</td>
<td>13</td>
<td>19</td>
<td>33</td>
</tr>
<tr>
<td>diff(sum)</td>
<td>1</td>
<td>5 - 1</td>
<td>13- 5</td>
<td>19-13</td>
<td>33-19</td>
</tr>
<tr>
<td>num</td>
<td>1</td>
<td>4</td>
<td>8</td>
<td>6</td>
<td>14</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-CPP-C-生成DLL与LIB并调用"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2025/03/23/CPP-C-%E7%94%9F%E6%88%90DLL%E4%B8%8ELIB%E5%B9%B6%E8%B0%83%E7%94%A8/">[C++] C++生成DLL与LIB并调用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2025/03/23/CPP-C-%E7%94%9F%E6%88%90DLL%E4%B8%8ELIB%E5%B9%B6%E8%B0%83%E7%94%A8/" class="article-date">
	  <time datetime="2025-03-23T11:06:53.000Z" itemprop="datePublished">三月 23, 2025</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>参考文章:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/findumars/p/6546091.html">MinGW gcc 生成动态链接库 dll 的一些问题汇总（由浅入深，很详细）</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/Sakuya__/article/details/105403172">C++ 调用dll的方法</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_33968104/article/details/91974204">用cl 、link工具编译生成 dll 与 lib</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wolfcsharp/article/details/103751494">windows下python调用dll的方法</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/646797073">Python ctypes：在 C 和 Python 之间传送一维数组</a></li>
</ul>
</blockquote>
<h2 id="DLL-就是把一个C-CPP程序功能作为文件供其它程序调用"><a href="#DLL-就是把一个C-CPP程序功能作为文件供其它程序调用" class="headerlink" title="DLL 就是把一个C&#x2F;CPP程序功能作为文件供其它程序调用"></a>DLL 就是把一个C&#x2F;CPP程序功能作为文件供其它程序调用</h2><ul>
<li>dll文件用于<strong>动态调用</strong>，在程序运行时调用，dll文件修改动能<strong>调用方程序也不需要重新编译</strong></li>
<li>lib文件用于<strong>静态调用</strong>，在编译时<strong>与调用方一起编译链接</strong>，编译出来的程序会比动态调用大</li>
</ul>
<h3 id="1-创建想要作为DLL的C源文件"><a href="#1-创建想要作为DLL的C源文件" class="headerlink" title="1.创建想要作为DLL的C源文件"></a>1.创建想要作为DLL的C源文件</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.c</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    __declspec(dllexport) <span class="type">int</span> __stdcall <span class="title function_">add</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line">    __declspec(dllexport) <span class="type">int</span> __stdcall <span class="title function_">sum</span><span class="params">(<span class="type">int</span> *nums, <span class="type">int</span> size)</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> __stdcall <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> __stdcall <span class="title function_">sum</span><span class="params">(<span class="type">int</span> *nums, <span class="type">int</span> size)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">        sum += nums[i];</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里定义了两个简单的函数,add和sum<br>之后通过编译器生成dll文件或lib文件,供主程序调用</p>
<h3 id="2-动态调用方式"><a href="#2-动态调用方式" class="headerlink" title="2.动态调用方式:"></a>2.动态调用方式:</h3><ol>
<li><p>生成dll</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GCC 编译器</span></span><br><span class="line">gcc -shared .\test.c -o test.dll</span><br><span class="line"><span class="comment"># MSVC 编译器</span></span><br><span class="line">cl -c test.c</span><br><span class="line"><span class="built_in">link</span> -DLL -out:test.dll test.obj</span><br></pre></td></tr></table></figure></li>
<li><p>调用dll</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// 加载dll文件</span></span><br><span class="line">	HMODULE hdll = LoadLibrary(<span class="string">&quot;test.dll&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (!hdll)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;未能加载DLL&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 定义函数指针用于接收需要调用的函数</span></span><br><span class="line">	<span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*FUNC_ADD_T)</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line">	<span class="keyword">typedef</span> <span class="title function_">int</span> <span class="params">(*FUNC_SUM_T)</span><span class="params">(<span class="type">int</span> *, <span class="type">int</span>)</span>;</span><br><span class="line">	<span class="comment">// 获取函数指针</span></span><br><span class="line">	FUNC_ADD_T add = (FUNC_ADD_T)GetProcAddress(hdll, <span class="string">&quot;add&quot;</span>);</span><br><span class="line">	FUNC_SUM_T sum = (FUNC_SUM_T)GetProcAddress(hdll, <span class="string">&quot;sum&quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (!add || !sum)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;未能加载函数&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> nums[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;add函数测试 1 + 2 = %d\n&quot;</span>, add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;待累加数组为: &quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, nums[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\nsum函数测试输出结果: %d&quot;</span>, sum(nums, <span class="number">5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译运行输出结果:</p>
<blockquote>
<p>出现乱码可以添加 <code>--exec-charset=gbk</code>编译选项</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ gcc .\main.c -o .\main.exe &amp;&amp; .\main.exe</span><br><span class="line">add函数测试 1 + 2 = 3</span><br><span class="line">待累加数组为: 1 2 3 4 5</span><br><span class="line"><span class="built_in">sum</span>函数测试输出结果: 15</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="3-静态生成方式"><a href="#3-静态生成方式" class="headerlink" title="3.静态生成方式"></a>3.静态生成方式</h3><ol>
<li><p>生成lib</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GCC生成lib</span></span><br><span class="line">gcc -c .\test.c -o test.lib</span><br><span class="line"><span class="comment"># MSVC生成lib,obj,exp文件</span></span><br><span class="line">cl /Dld .\test.c</span><br></pre></td></tr></table></figure>
</li>
<li><p>主函数调用</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="comment">// 声明外部函数</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> *nums, <span class="type">int</span> size)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> nums[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;add函数测试 1 + 2 = %d\n&quot;</span>, add(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;待累加数组为: &quot;</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, nums[i]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\nsum函数测试输出结果: %d&quot;</span>, sum(nums, <span class="number">5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译运行<br> <code>-L</code>参数指定要调用的lib文件所在目录,<br> <code>-l</code>参数指定要调用的lib文件名(不包含文件类型后缀)</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc .\main.c -L. -ltest -o main.exe &amp;&amp; ./main.exe</span><br><span class="line">add函数测试 1 + 2 = 3</span><br><span class="line">待累加数组为: 1 2 3 4 5</span><br><span class="line"><span class="built_in">sum</span>函数测试输出结果: 15</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="在Python中调用dll中的函数"><a href="#在Python中调用dll中的函数" class="headerlink" title="在Python中调用dll中的函数"></a>在Python中调用dll中的函数</h3><ol>
<li>调用dll中的函数 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"><span class="keyword">import</span> ctypes <span class="keyword">as</span> C</span><br><span class="line"><span class="keyword">from</span> os.path <span class="keyword">import</span> abspath</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载动态链接库</span></span><br><span class="line">dll = C.cdll.LoadLibrary(abspath(<span class="string">&quot;test.dll&quot;</span>))</span><br><span class="line"><span class="comment"># 设置函数参数类型和返回值类型</span></span><br><span class="line">dll.<span class="built_in">sum</span>.argtypes = [C.POINTER(C.c_int), C.c_int]</span><br><span class="line">dll.<span class="built_in">sum</span>.restype = C.c_int</span><br><span class="line"><span class="comment"># 生成测试数据</span></span><br><span class="line">arr = (C.c_int * <span class="number">5</span>)(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">result1 = dll.add(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">result2 = dll.<span class="built_in">sum</span>(arr, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;add 输出结果: &quot;</span>, result1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;待测试数组: &quot;</span>, arr[:])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;sum 输出结果: &quot;</span>, result1)</span><br></pre></td></tr></table></figure></li>
<li>运行输出结果 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ python main.py</span><br><span class="line">add 输出结果: 30</span><br><span class="line">待测试数组:  [1, 2, 3, 4, 5]</span><br><span class="line"><span class="built_in">sum</span> 输出结果:  30</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Cpp-socket通信"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/12/08/Cpp-socket%E9%80%9A%E4%BF%A1/">[C++] Cpp socket通信</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2024/12/08/Cpp-socket%E9%80%9A%E4%BF%A1/" class="article-date">
	  <time datetime="2024-12-08T14:47:11.000Z" itemprop="datePublished">十二月 8, 2024</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="C-Boost-Asio实现Socket局域网通信"><a href="#C-Boost-Asio实现Socket局域网通信" class="headerlink" title="C++ Boost.Asio实现Socket局域网通信"></a>C++ Boost.Asio实现Socket局域网通信</h2><p>需要的头文件：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>       <span class="comment">// 输入输出</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span>        <span class="comment">// 文件操作</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span>         <span class="comment">// 字符串操作</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span>     <span class="comment">// 文件操作</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/asio.hpp&gt;</span> <span class="comment">// socket通信</span></span></span><br></pre></td></tr></table></figure>
<p>笔记</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tcp::resolver resolver = tcp::<span class="built_in">resolver</span>(context);           <span class="comment">// 解析器</span></span><br><span class="line">tcp::endpoint ep = *resolver.<span class="built_in">resolve</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;5555&quot;</span>); <span class="comment">// 解析域名</span></span><br><span class="line"><span class="function">tcp::resolver <span class="title">resolver</span><span class="params">(io)</span></span>;                                <span class="comment">// 解析器</span></span><br><span class="line">tcp::<span class="function">resolver::query <span class="title">q</span><span class="params">(<span class="string">&quot;www.baidu.com&quot;</span>, <span class="string">&quot;https&quot;</span>)</span></span>;          <span class="comment">// 查询</span></span><br><span class="line">tcp::resolver::iterator eq2 = resolver.<span class="built_in">resolve</span>(q);         <span class="comment">// 迭代器</span></span><br><span class="line">tcp::endpoint ep = *resolver.<span class="built_in">resolve</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;5555&quot;</span>); <span class="comment">// 解析域名</span></span><br><span class="line"><span class="function">tcp::resolver <span class="title">resolver</span><span class="params">(io)</span></span>;                                <span class="comment">// 解析器</span></span><br><span class="line">tcp::<span class="function">resolver::query <span class="title">q</span><span class="params">(<span class="string">&quot;www.baidu.com&quot;</span>, <span class="string">&quot;https&quot;</span>)</span></span>;          <span class="comment">// 查询</span></span><br><span class="line">tcp::resolver::iterator eq2 = resolver.<span class="built_in">resolve</span>(q);         <span class="comment">// 迭代器</span></span><br><span class="line">sock.<span class="built_in">send</span>(...); <span class="comment">// 发送数据</span></span><br><span class="line">sock.<span class="built_in">write_some</span>(boost::asio::<span class="built_in">buffer</span>(<span class="string">&quot;hello world&quot;</span>, <span class="built_in">sizeof</span>(<span class="string">&quot;hello world&quot;</span>)));</span><br><span class="line">sock.<span class="built_in">async_send</span>(...); <span class="comment">// 异步</span></span><br><span class="line">io_context.<span class="built_in">run</span>();</span><br><span class="line">是一个成员函数，它的作用是启动异步操作的处理循环</span><br><span class="line">sock.<span class="built_in">shutdown</span>(tcp::socket::shutdown_both); <span class="comment">// 关闭连接</span></span><br></pre></td></tr></table></figure>
<h3 id="客户端源代码"><a href="#客户端源代码" class="headerlink" title="客户端源代码:"></a>客户端源代码:</h3><p>预处理和命名空间：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// send.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PORT 5555</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BUF_SIZE 1024</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Error -1</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> boost::asio::ip::tcp;</span><br></pre></td></tr></table></figure>
<p>发送文件函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">send_file</span><span class="params">(tcp::socket &amp;sock, std::string filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::ifstream <span class="title">file</span><span class="params">(filename, std::ios::binary)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (!file)</span><br><span class="line">        <span class="keyword">return</span> Error;</span><br><span class="line">    <span class="type">char</span> buffer[BUF_SIZE]; <span class="comment">// 分配内存</span></span><br><span class="line">    <span class="keyword">while</span> (file)</span><br><span class="line">    &#123;</span><br><span class="line">        file.<span class="built_in">read</span>(buffer, BUF_SIZE); <span class="comment">// 读取文件</span></span><br><span class="line">        <span class="keyword">if</span> (file.<span class="built_in">gcount</span>() &lt; BUF_SIZE)</span><br><span class="line">        &#123;</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(buffer, file.<span class="built_in">gcount</span>()));</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(buffer, BUF_SIZE));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参数解析函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Parameter_parsing</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv, string &amp;FilenameOrMsg, <span class="type">int</span> &amp;Is_File, boost::asio::ip::address &amp;ip)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc != <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> Error;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        boost::asio::ip::address _ip;</span><br><span class="line">        boost::system::error_code ec;</span><br><span class="line">        _ip = boost::asio::ip::address::<span class="built_in">from_string</span>(argv[<span class="number">1</span>], ec);</span><br><span class="line">        <span class="keyword">if</span> (ec)</span><br><span class="line">            <span class="keyword">return</span> Error;</span><br><span class="line">        ip = _ip;</span><br><span class="line">        FilenameOrMsg = <span class="built_in">string</span>(argv[<span class="number">2</span>]);</span><br><span class="line">        <span class="keyword">if</span> (filesystem::<span class="built_in">exists</span>(FilenameOrMsg) &amp;&amp; filesystem::<span class="built_in">is_regular_file</span>(FilenameOrMsg))</span><br><span class="line">            Is_File = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        boost::asio::io_context io_context;</span><br><span class="line">        <span class="function">tcp::socket <span class="title">sock</span><span class="params">(io_context)</span></span>;</span><br><span class="line">        boost::asio::ip::address TargetIp;</span><br><span class="line">        string FilenameOrMsg;</span><br><span class="line">        string &amp;FileName = FilenameOrMsg;</span><br><span class="line">        string &amp;Msg = FilenameOrMsg;</span><br><span class="line">        <span class="type">int</span> Is_File = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Parameter_parsing</span>(argc, argv, FilenameOrMsg, Is_File, TargetIp) == Error)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 输出提示</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Usage: ./send &lt;ip&gt; &lt;filename or message&gt;&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sock.<span class="built_in">connect</span>(tcp::<span class="built_in">endpoint</span>(TargetIp, PORT));</span><br><span class="line">        <span class="keyword">if</span> (Is_File)</span><br><span class="line">        &#123;</span><br><span class="line">            string _FileSize = std::<span class="built_in">to_string</span>(std::filesystem::<span class="built_in">file_size</span>(FileName));</span><br><span class="line">            string _FileName = filesystem::<span class="built_in">path</span>(FilenameOrMsg).<span class="built_in">filename</span>().<span class="built_in">string</span>();</span><br><span class="line">            string _info = _FileName + <span class="string">&#x27;|&#x27;</span> + _FileSize;</span><br><span class="line">            <span class="type">size_t</span> _info_Size = _info.<span class="built_in">size</span>();</span><br><span class="line">            <span class="type">char</span> _info_Size_buffer[<span class="built_in">sizeof</span>(<span class="type">size_t</span>)];</span><br><span class="line">            <span class="built_in">memcpy</span>(_info_Size_buffer, &amp;_info_Size, <span class="built_in">sizeof</span>(<span class="type">size_t</span>));</span><br><span class="line">            <span class="type">char</span> Mode[<span class="number">10</span>] = <span class="string">&quot;FILE MODE&quot;</span>;</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(Mode, <span class="number">10</span>));</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(_info_Size_buffer, <span class="built_in">sizeof</span>(<span class="type">size_t</span>)));</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(_info, _info_Size));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">char</span> Mode[<span class="number">10</span>] = <span class="string">&quot;MSGS MODE&quot;</span>;</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(Mode, <span class="number">10</span>));</span><br><span class="line">            <span class="type">size_t</span> _Msg_Size = Msg.<span class="built_in">size</span>();</span><br><span class="line">            <span class="type">char</span> _Msg_Size_buffer[<span class="built_in">sizeof</span>(<span class="type">size_t</span>)];</span><br><span class="line">            <span class="built_in">memcpy</span>(_Msg_Size_buffer, &amp;_Msg_Size, <span class="built_in">sizeof</span>(<span class="type">size_t</span>));</span><br><span class="line">            <span class="type">int</span> len = sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(_Msg_Size_buffer, <span class="built_in">sizeof</span>(<span class="type">size_t</span>)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> confirm_send = <span class="number">0</span>;</span><br><span class="line">        sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(&amp;confirm_send, <span class="built_in">sizeof</span>(<span class="type">char</span>)));</span><br><span class="line">        <span class="keyword">if</span> (Is_File)</span><br><span class="line">            <span class="keyword">if</span> (confirm_send || sock.<span class="built_in">is_open</span>())</span><br><span class="line">                <span class="built_in">send_file</span>(sock, FileName);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;对方已拒绝接受文件!&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(Msg, Msg.<span class="built_in">size</span>()));</span><br><span class="line">        sock.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (<span class="type">const</span> boost::system::system_error &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;无法链接至目标主机!&quot;</span> &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="服务端源代码"><a href="#服务端源代码" class="headerlink" title="服务端源代码:"></a>服务端源代码:</h3><p>确认文件是否接收函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Confirm</span><span class="params">(string FileName, <span class="type">size_t</span> FileSize)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;文件名: &quot;</span> &lt;&lt; FileName &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;文件大小: &quot;</span> &lt;&lt; FileSize &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;是否接收文件(Y/N): &quot;</span>;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    cin &gt;&gt; ch;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;Y&#x27;</span> || ch == <span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接收文件函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">recv_file</span><span class="params">(tcp::socket &amp;sock, std::string &amp;file_name)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">std::ofstream <span class="title">ofs</span><span class="params">(file_name, std::ios::binary)</span></span>;</span><br><span class="line">    <span class="type">char</span> buf[BUF_SIZE];</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> len = sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(buf, BUF_SIZE));</span><br><span class="line">        ofs.<span class="built_in">write</span>(buf, len);</span><br><span class="line">        <span class="keyword">if</span> (len &lt; BUF_SIZE)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>主函数部分:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;开始接收数据!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    boost::asio::io_context context;</span><br><span class="line">    <span class="function">tcp::socket <span class="title">sock</span><span class="params">(context)</span></span>;</span><br><span class="line">    <span class="function">tcp::endpoint <span class="title">ep</span><span class="params">(boost::asio::ip::address::from_string(<span class="string">&quot;0.0.0.0&quot;</span>), PORT)</span></span>;</span><br><span class="line">    <span class="function">tcp::acceptor <span class="title">acceptor</span><span class="params">(context, ep)</span></span>;</span><br><span class="line">    acceptor.<span class="built_in">accept</span>(sock);</span><br><span class="line">    <span class="type">char</span> Mode[<span class="number">10</span>] = <span class="string">&quot;FILE MODE&quot;</span>;</span><br><span class="line">    string FileName;</span><br><span class="line">    <span class="type">size_t</span> FileSize;</span><br><span class="line">    <span class="type">size_t</span> InfoSize;</span><br><span class="line">    sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(Mode, <span class="number">10</span>));</span><br><span class="line">    <span class="comment">// 将整数转换为字节流并存储到字符数组中</span></span><br><span class="line">    <span class="type">char</span> _InfoSize_buf[<span class="built_in">sizeof</span>(<span class="type">size_t</span>)];</span><br><span class="line">    sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(_InfoSize_buf, <span class="built_in">sizeof</span>(<span class="type">size_t</span>)));</span><br><span class="line">    std::<span class="built_in">memcpy</span>(&amp;InfoSize, _InfoSize_buf, <span class="built_in">sizeof</span>(<span class="type">size_t</span>));</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">strcmp</span>(<span class="string">&quot;FILE MODE&quot;</span>, Mode))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> _File_NameSzie[InfoSize + <span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> Index = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> len = sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(_File_NameSzie, InfoSize));</span><br><span class="line">        _File_NameSzie[len] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c : _File_NameSzie)</span><br><span class="line">        &#123;</span><br><span class="line">            Index++;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                string _StrT_FileSize = <span class="built_in">string</span>(_File_NameSzie).<span class="built_in">substr</span>(Index, InfoSize);</span><br><span class="line">                FileSize = <span class="built_in">stoi</span>(_StrT_FileSize);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            FileName = FileName + c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Confirm</span>(FileName, FileSize))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">char</span> Is_Confirm = <span class="number">1</span>;</span><br><span class="line">            sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(&amp;Is_Confirm, <span class="built_in">sizeof</span>(<span class="type">char</span>)));</span><br><span class="line">            <span class="built_in">recv_file</span>(sock, FileName);</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;文件接收成功!&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;来自 &quot;</span> &lt;&lt; sock.<span class="built_in">remote_endpoint</span>().<span class="built_in">address</span>() &lt;&lt; <span class="string">&quot; 的消息: &quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="type">char</span> confirm_send = <span class="number">0</span>;</span><br><span class="line">        sock.<span class="built_in">send</span>(boost::asio::<span class="built_in">buffer</span>(&amp;confirm_send, <span class="built_in">sizeof</span>(<span class="type">char</span>)));</span><br><span class="line">        <span class="type">char</span> _Msg_buf[InfoSize + <span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> len = sock.<span class="built_in">read_some</span>(boost::asio::<span class="built_in">buffer</span>(_Msg_buf, InfoSize));</span><br><span class="line">        _Msg_buf[len] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        cout &lt;&lt; _Msg_buf &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    sock.<span class="built_in">close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Cpp批量重命名文件"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2024/12/08/Cpp%E6%89%B9%E9%87%8F%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6/">[C++] Cpp批量重命名文件</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2024/12/08/Cpp%E6%89%B9%E9%87%8F%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6/" class="article-date">
	  <time datetime="2024-12-08T14:31:22.000Z" itemprop="datePublished">十二月 8, 2024</time>
	</a>

       
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Cpp-批量重命名"><a href="#Cpp-批量重命名" class="headerlink" title="Cpp 批量重命名"></a>Cpp 批量重命名</h1><p>主要使用的类与方法:</p>
<ul>
<li>std::stoi : 字符串转数字</li>
<li>std::ofstream : 文件输出流</li>
<li>std::filesystem : 文件系统库</li>
<li>std::filesystem::path : 路径类</li>
<li>std::filesystem::rename : 重命名文件</li>
<li>std::filesystem::extension : 获取文件后缀</li>
<li>std::filesystem::absolute : 获取绝对路径</li>
<li>std::filesystem::current_path : 获取当前路径</li>
<li>std::filesystem::path::generic_string : 获取路径字符串</li>
<li>std::filesystem::temporary_directory_path : 获取临时目录</li>
<li>std::filesystem::directory_iterator: 遍历文件夹</li>
<li>std::filesystem::exists : 判断文件是否存在</li>
<li>std::filesystem::is_directory : 判断是否为文件夹</li>
<li>std::filesystem::is_symlink : 判断是否为软链接</li>
<li>std::filesystem::append_directory_options : 追加选项</li>
</ul>
<p>需要用的头文件:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>   <span class="comment">// 输入输出流</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;filesystem&gt;</span> <span class="comment">// 文件系统库</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span>     <span class="comment">// 字符串类</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span>    <span class="comment">// 文件输出流</span></span></span><br></pre></td></tr></table></figure>

<p>全部的源代码:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> fs = std::filesystem;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> <span class="type">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 参数</span></span><br><span class="line">    std::string parameters[argc];</span><br><span class="line">    <span class="comment">// 日志文件</span></span><br><span class="line">    std::string LogFilePath = fs::<span class="built_in">temp_directory_path</span>().<span class="built_in">append</span>(<span class="string">&quot;log.txt&quot;</span>).<span class="built_in">generic_string</span>();</span><br><span class="line">    <span class="function">std::ofstream <span class="title">Logs</span><span class="params">(LogFilePath)</span></span>;</span><br><span class="line">    <span class="type">int</span> OpenLog = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 重命名参数</span></span><br><span class="line">    std::string BaseName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    std::string TargetExt = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// 输出参数</span></span><br><span class="line">    fs::path OutDir = fs::<span class="built_in">current_path</span>();</span><br><span class="line">    <span class="comment">// 统计</span></span><br><span class="line">    <span class="type">int</span> FileCount = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出帮助信息</span></span><br><span class="line">    <span class="keyword">auto</span> OutHelpInfo = []()</span><br><span class="line">    &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;批量重命名文件&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;参数说明:&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -h, --Help      显示帮助信息&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -b, --Base      设置重命名的基准文件名&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -l, --Log       开启日志保存重命名记录&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -c, --FileCount 设置重命名文件的个数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -o, --OutDir    设置重命名文件的输出目录&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;  -e, --Ext       指定需要重命名文件的后缀名(含分隔符\&quot;.\&quot;)&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> UpperStr = [](std::string str)</span><br><span class="line">    &#123;</span><br><span class="line">        std::string result;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;c : str)</span><br><span class="line">            result += <span class="built_in">toupper</span>(c);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (argc &lt; <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 参数解析</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; argc; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        parameters[i] = argv[i];</span><br><span class="line">        <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-h&quot;</span> || parameters[i] == <span class="string">&quot;--help&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-b&quot;</span> || parameters[i] == <span class="string">&quot;--Base&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; argc)</span><br><span class="line">                BaseName = argv[i + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;错误: 参数 -b 缺少参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-l&quot;</span> || parameters[i] == <span class="string">&quot;--Log&quot;</span>)</span><br><span class="line">            OpenLog = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-c&quot;</span> || parameters[i] == <span class="string">&quot;--FileCount&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; argc)</span><br><span class="line">                FileCount = std::<span class="built_in">stoi</span>(argv[i + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;错误: 参数 -c 缺少参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-o&quot;</span> || parameters[i] == <span class="string">&quot;--OutDir&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; argc)</span><br><span class="line">                OutDir = fs::<span class="built_in">absolute</span>(argv[i + <span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;错误: 参数 -o 缺少参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (parameters[i] == <span class="string">&quot;-e&quot;</span> || parameters[i] == <span class="string">&quot;--Ext&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &lt; argc)</span><br><span class="line">                TargetExt = <span class="built_in">UpperStr</span>(std::<span class="built_in">string</span>(argv[i + <span class="number">1</span>]));</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;错误: 参数 -e 缺少参数&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                <span class="built_in">OutHelpInfo</span>();</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!OpenLog)</span><br><span class="line">        Logs.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出参数</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;基准文件名: &quot;</span> &lt;&lt; BaseName &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">if</span> (OpenLog)</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;已开启开启日志&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">if</span> (FileCount != <span class="number">-1</span>)</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;重命名文件个数: &quot;</span> &lt;&lt; FileCount &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">if</span> (TargetExt != <span class="string">&quot;&quot;</span>)</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;目标文件后缀: &quot;</span> &lt;&lt; TargetExt &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;输出目录: &quot;</span> &lt;&lt; OutDir.<span class="built_in">generic_string</span>() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;是否开始批量重命名文件?(Y/N): &quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 确认</span></span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    std::cin &gt;&gt; c;</span><br><span class="line">    <span class="keyword">if</span> (c != <span class="string">&#x27;Y&#x27;</span> &amp;&amp; c != <span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    fs::path currentPath = fs::<span class="built_in">current_path</span>();</span><br><span class="line">    <span class="type">int</span> count = <span class="number">1</span>, ID = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 遍历</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;file : fs::<span class="built_in">directory_iterator</span>(currentPath))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 达到指定个数退出</span></span><br><span class="line">        <span class="keyword">if</span> (FileCount != <span class="number">-1</span> &amp;&amp; count &gt; FileCount)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">// 跳过文件夹</span></span><br><span class="line">        <span class="keyword">if</span> (file.<span class="built_in">is_directory</span>())</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">// 确认指定后缀</span></span><br><span class="line">        std::string Extension = <span class="built_in">UpperStr</span>(file.<span class="built_in">path</span>().<span class="built_in">extension</span>().<span class="built_in">generic_string</span>());</span><br><span class="line">        <span class="keyword">if</span> (!TargetExt.<span class="built_in">empty</span>() &amp;&amp; Extension != TargetExt)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">// 获取目标文件名</span></span><br><span class="line">        fs::path ToName = OutDir / (BaseName + std::<span class="built_in">to_string</span>(ID++) + Extension);</span><br><span class="line">        <span class="comment">// 跳过已重命名文件</span></span><br><span class="line">        <span class="keyword">if</span> (fs::<span class="built_in">exists</span>(ToName))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (OpenLog)</span><br><span class="line">            &#123;</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;文件 \&quot;&quot;</span> &lt;&lt; ToName &lt;&lt; <span class="string">&quot;\&quot; 已存在, 跳过。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">                ID = ID + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 跳过软链接</span></span><br><span class="line">        <span class="keyword">if</span> (fs::<span class="built_in">is_symlink</span>(file))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (OpenLog)</span><br><span class="line">                std::cout &lt;&lt; <span class="string">&quot;文件 \&quot;&quot;</span> &lt;&lt; file.<span class="built_in">path</span>() &lt;&lt; <span class="string">&quot;\&quot; 是软链接, 跳过。&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 输出日志</span></span><br><span class="line">        <span class="keyword">if</span> (OpenLog)</span><br><span class="line">        &#123;</span><br><span class="line">            Logs &lt;&lt; file.<span class="built_in">path</span>() &lt;&lt; <span class="string">&quot; =&gt; &quot;</span> &lt;&lt; ToName &lt;&lt; std::endl;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Renaming: &quot;</span> &lt;&lt; file.<span class="built_in">path</span>() &lt;&lt; <span class="string">&quot; =&gt; &quot;</span> &lt;&lt; ToName &lt;&lt; std::endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 重命名</span></span><br><span class="line">        fs::<span class="built_in">rename</span>(file.<span class="built_in">path</span>(), ToName);</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保存日志</span></span><br><span class="line">    <span class="keyword">if</span> (OpenLog)</span><br><span class="line">    &#123;</span><br><span class="line">        Logs.<span class="built_in">close</span>();</span><br><span class="line">        fs::<span class="built_in">rename</span>(LogFilePath, currentPath / <span class="string">&quot;log.txt&quot;</span>);</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;重命名完成,日志保存在: &quot;</span> &lt;&lt; (currentPath / <span class="string">&quot;log.txt&quot;</span>).<span class="built_in">generic_string</span>() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>感谢你看到到这里！</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
</article>

<!-- Table of Contents -->

  


</section>
          <aside id="sidebar">
  
    <div style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 72%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 36px; width: 100%;" placeholder=" 搜索…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="搜索">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(无标题)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">联系我们</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
   			<li><a target="_blank" rel="noopener" href="https://github.com/CiceroCole" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 

   		
   			<li><a href="" title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 

   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a target="_blank" rel="noopener" href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a target="_blank" rel="noopener" href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a target="_blank" rel="noopener" href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a target="_blank" rel="noopener" href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a target="_blank" rel="noopener" href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a target="_blank" rel="noopener" href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>最新文章</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/05/03/%E7%9E%8E%E6%8D%A3%E9%BC%93-%E6%8A%8AC%E7%9B%98%E8%BD%AC%E7%A7%BB%E7%9A%84%E5%8F%AA%E5%89%A9Windows/">[瞎捣鼓] 把C盘转移的只剩Windows</a></h6>
              <span>五月 3, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/04/23/Java-Java%E6%89%93%E5%8C%85jar%E6%96%87%E4%BB%B6/">[Java] Java打包jar文件</a></h6>
              <span>四月 23, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/04/23/Python-embed%E7%89%88Python%E6%89%93%E5%8C%85%E4%BD%BF%E7%94%A8/">[Python] embed版Python打包使用</a></h6>
              <span>四月 23, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/03/25/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%20%E7%BA%BF%E6%AE%B5%E6%A0%91%E7%AC%94%E8%AE%B0/">[数据结构] 线段树笔记</a></h6>
              <span>三月 25, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/03/23/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84-%E5%89%8D%E7%BC%80%E5%92%8C/">[数据结构] 差分数组+前缀和</a></h6>
              <span>三月 23, 2025</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2025/03/23/CPP-C-%E7%94%9F%E6%88%90DLL%E4%B8%8ELIB%E5%B9%B6%E8%B0%83%E7%94%A8/">[C++] C++生成DLL与LIB并调用</a></h6>
              <span>三月 23, 2025</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="tag">文件管理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9E%8E%E6%8D%A3%E9%BC%93/" rel="tag">瞎捣鼓</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 15px;">数据结构</a> <a href="/tags/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" style="font-size: 10px;">文件管理</a> <a href="/tags/%E7%9E%8E%E6%8D%A3%E9%BC%93/" style="font-size: 10px;">瞎捣鼓</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">五月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">四月 2025</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives/" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about/" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2025 Cicero Cole All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
      var headerblur = document.getElementById("header-blur");
      headerblur.style.minHeight = window.getComputedStyle(document.getElementById("allheader"), null).height;
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
